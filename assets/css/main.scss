// @import "normalize";
// @import "colors";
@import "styles";
@import "photoswipe/photoswipe";
@import "photoswipe/photoswipe-dynamic-caption-plugin";

.lazyload,
.lazyloading {
  opacity: 0;
}

.lazyloaded {
  opacity: 1;
  transition: opacity 300ms;
}

img.lazyload:not([src]) {
  visibility: hidden;
}

// Like count display in PhotoSwipe lightbox
.pswp__like-count {
  position: relative;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border-radius: 6px;
  color: #fff;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 150ms;

  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  &:active {
    transform: scale(0.95);
  }

  svg {
    color: #ef4444;
    transition: transform 150ms;
  }

  &.liked svg {
    animation: like-pop 300ms ease-out;
  }

  .like-tooltip {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 6px;
    padding: 8px 12px;
    border-radius: 6px;
    background-color: rgba(0, 0, 0, 0.9);
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 150ms, visibility 150ms;
  }

  &:hover .like-tooltip {
    opacity: 1;
    visibility: visible;
  }
}

// Caption styling for EXIF data
.pswp-caption-content {
  display: none; // Hidden in gallery, shown by PhotoSwipe
}

.pswp__dynamic-caption {
  .caption-title {
    display: block;
    font-weight: 500;
    margin-bottom: 0.5em;
  }

  .caption-exif {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75em;
    font-size: 0.9em;
    opacity: 0.85;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  .exif-item {
    white-space: nowrap;

    &:not(:last-child)::after {
      content: "Â·";
      margin-left: 0.75em;
      opacity: 0.5;
    }
  }

  .caption-gear {
    display: block;
    margin-top: 0.4em;
    font-size: 0.85em;
    opacity: 0.7;
  }

  .gear-item {
    &:not(:last-child)::after {
      content: " + ";
      opacity: 0.5;
    }
  }
}

// Info button in PhotoSwipe toolbar
.pswp__button--info {
  background: none;
  border: none;
  width: 50px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  opacity: 0.85;

  &:hover {
    opacity: 1;
  }

  svg {
    filter: drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5));
  }
}

// Info popup for EXIF details
.pswp-info-popup {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  z-index: 999999 !important;
  display: flex !important;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.8);
  opacity: 0;
  visibility: hidden;
  transition: opacity 200ms, visibility 200ms;
  pointer-events: none;

  &.visible {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }
}

.pswp-info-popup-content {
  position: relative;
  max-width: 400px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  background-color: #1a1a1a;
  border-radius: 12px;
  padding: 24px;
  color: #fff;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.pswp-info-popup-close {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 32px;
  height: 32px;
  border: none;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  color: #fff;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 150ms;

  &:hover {
    background: rgba(255, 255, 255, 0.2);
  }
}

.pswp-info-title {
  margin: 0 0 20px;
  font-size: 1.25rem;
  font-weight: 600;
  padding-right: 32px;
}

.pswp-info-section {
  margin-bottom: 20px;

  &:last-child {
    margin-bottom: 0;
  }

  h4 {
    margin: 0 0 12px;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: rgba(255, 255, 255, 0.5);
  }
}

.pswp-info-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.pswp-info-gear {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.pswp-info-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.pswp-info-label {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.5);
}

.pswp-info-empty {
  margin: 0;
  color: rgba(255, 255, 255, 0.5);
  text-align: center;
}

.pswp-info-value {
  font-size: 1rem;
  font-weight: 500;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
}